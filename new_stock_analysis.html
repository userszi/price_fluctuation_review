<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>è‚¡ç¥¨æ¶¨è·Œåˆ†æ - ä¸“ä¸šæŠ•èµ„å·¥å…·</title>
    <meta name="description" content="ä¸“ä¸šçš„è‚¡ç¥¨æ¶¨è·Œåˆ†æå·¥å…·ï¼Œæä¾›å®æ—¶å¸‚åœºæ•°æ®ã€æ·±åº¦åˆ†æå’ŒæŠ•èµ„å»ºè®®">
    <meta name="keywords" content="è‚¡ç¥¨åˆ†æ,æ¶¨è·Œåœ,æŠ•èµ„,Aè‚¡,å¸‚åœºæ•°æ®">
    
    <!-- æ·»åŠ Markdownæ¸²æŸ“åº“ -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- ç¡®ä¿marked.jsåŠ è½½å®Œæˆ -->
    <script>
        // æ£€æŸ¥markedæ˜¯å¦å·²åŠ è½½
        function checkMarkedLoaded() {
            if (typeof marked === 'undefined') {
                console.error('marked.jsæœªæ­£ç¡®åŠ è½½ï¼Œå°è¯•é‡æ–°åŠ è½½');
                const script = document.createElement('script');
                script.src = 'https://cdn.jsdelivr.net/npm/marked/marked.min.js';
                script.onload = function() {
                    console.log('marked.jsé‡æ–°åŠ è½½æˆåŠŸ');
                };
                script.onerror = function() {
                    console.error('marked.jsé‡æ–°åŠ è½½å¤±è´¥');
                };
                document.head.appendChild(script);
                return false;
            }
            return true;
        }
        
        // é…ç½®markedé€‰é¡¹ï¼Œæ”¯æŒæ¢è¡Œç¬¦
        if (typeof marked !== 'undefined') {
            marked.setOptions({
                breaks: true,  // æ”¯æŒæ¢è¡Œç¬¦
                gfm: true,     // å¯ç”¨GitHubé£æ ¼çš„Markdown
                sanitize: false // ä¸æ¸…ç†HTMLæ ‡ç­¾
            });
        }
    </script>
    
    <style>
        /* åŸºç¡€æ ·å¼ */
        html {
            box-sizing: border-box;
        }
        
        *, ::after, ::before {
            box-sizing: inherit;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Roboto', 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background-color: #f0f2f5;
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
        }
        
        /* å®¹å™¨æ ·å¼ */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* é¡¶éƒ¨å¯¼èˆªæ  */
        .top-bar {
            background-color: #2c3e50;
            color: #fff;
            padding: 15px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .top-bar-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .logo {
            font-size: 24px;
            font-weight: 700;
            color: #fff;
            text-decoration: none;
            display: flex;
            align-items: center;
        }
        
        .logo-icon {
            margin-right: 10px;
            font-size: 28px;
        }
        
        .nav-menu {
            display: flex;
            list-style: none;
        }
        
        .nav-menu li {
            margin-left: 25px;
        }
        
        .nav-menu a {
            color: #ecf0f1;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }
        
        .nav-menu a:hover {
            color: #3498db;
        }
        
        /* æ±‰å ¡èœå•æŒ‰é’® */
        .menu-toggle {
            display: none;
            background: none;
            border: none;
            color: #fff;
            font-size: 24px;
            cursor: pointer;
            padding: 5px;
            margin-right: 10px;
        }
        
        /* ç§»åŠ¨ç«¯å¯¼èˆªèœå• */
        .mobile-nav {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background-color: #2c3e50;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            z-index: 99;
        }
        
        .mobile-nav-menu {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .mobile-nav-menu li {
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .mobile-nav-menu a {
            display: block;
            padding: 15px 20px;
            color: #ecf0f1;
            text-decoration: none;
            font-weight: 500;
            transition: background-color 0.3s;
        }
        
        .mobile-nav-menu a:hover {
            background-color: rgba(255,255,255,0.1);
        }
        
        /* æœç´¢æ¡† */
        .search-box {
            position: relative;
            width: 300px;
        }
        
        .search-input {
            width: 100%;
            padding: 10px 40px 10px 15px;
            border: none;
            border-radius: 20px;
            background-color: rgba(255,255,255,0.2);
            color: #fff;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .search-input::placeholder {
            color: rgba(255,255,255,0.7);
        }
        
        .search-input:focus {
            outline: none;
            background-color: rgba(255,255,255,0.3);
        }
        
        .search-btn {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #fff;
            cursor: pointer;
        }
        
        /* ä¸»è¦å†…å®¹åŒºåŸŸ */
        .main-content {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 30px;
            margin-top: 30px;
        }
        
        /* å“åº”å¼å¸ƒå±€ - å¹³æ¿å’Œæ‰‹æœº */
        @media (max-width: 992px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                order: 2;
                margin-bottom: 20px;
            }
            
            .content {
                order: 1;
            }
        }
        
        /* ä¾§è¾¹æ  */
        .sidebar {
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            padding: 25px;
            height: fit-content;
            position: sticky;
            top: 100px;
        }
        
        /* ç§»åŠ¨ç«¯ä¾§è¾¹æ ä¼˜åŒ– */
        @media (max-width: 992px) {
            .sidebar {
                position: relative;
                top: 0;
                margin-bottom: 20px;
                border-radius: 8px;
            }
            
            .sidebar-section {
                margin-bottom: 15px;
            }
            
            .sidebar-title {
                font-size: 16px;
                margin-bottom: 10px;
                display: flex;
                justify-content: space-between;
                align-items: center;
                cursor: pointer;
                padding: 5px 0;
            }
            
            .sidebar-title::after {
                content: 'â–¼';
                font-size: 12px;
                transition: transform 0.3s ease;
            }
            
            .sidebar-section.collapsed .sidebar-title::after {
                transform: rotate(180deg);
            }
            
            .filter-list {
                max-height: 500px;
                overflow: hidden;
                transition: max-height 0.3s ease;
            }
            
            .sidebar-section.collapsed .filter-list {
                max-height: 0;
            }
            
            .filter-link {
                font-size: 14px;
                padding: 8px 12px;
            }
        }
        
        .sidebar-section {
            margin-bottom: 30px;
        }
        
        .sidebar-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #2c3e50;
            display: flex;
            align-items: center;
        }
        
        .sidebar-title .icon {
            margin-right: 8px;
        }
        
        .filter-list {
            list-style: none;
        }
        
        .filter-item {
            margin-bottom: 10px;
        }
        
        .filter-link {
            display: block;
            padding: 10px 15px;
            border-radius: 8px;
            color: #555;
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .filter-link:hover, .filter-link.active {
            background-color: #3498db;
            color: #fff;
        }
        
        /* å†…å®¹åŒºåŸŸ */
        .content {
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            overflow: hidden;
        }
        
        .content-header {
            padding: 20px 25px;
            background-color: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }
        
        .content-title {
            font-size: 22px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        /* ç»Ÿè®¡å¡ç‰‡ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            padding: 25px;
        }
        
        /* ç§»åŠ¨ç«¯ç»Ÿè®¡å¡ç‰‡ä¼˜åŒ– */
        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: 1fr; /* å•åˆ—å¸ƒå±€ */
                gap: 15px;
                padding: 15px;
            }
            
            .stat-card {
                padding: 15px;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }
            
            .stat-value {
                font-size: 24px;
            }
            
            .stat-label {
                font-size: 13px;
                text-align: right;
                max-width: 40%;
            }
        }
        
        .stat-card {
            background: #fff;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            border-left: 4px solid #3498db;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .stat-card.up {
            border-left-color: #2ecc71;
        }
        
        .stat-card.down {
            border-left-color: #e74c3c;
        }
        
        .stat-value {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 14px;
            color: #7f8c8d;
        }
        
        /* è¡¨æ ¼å®¹å™¨ */
        .table-container {
            width: 100%;
            overflow-x: auto;
            margin-top: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-radius: 8px;
        }
        
        /* ç§»åŠ¨ç«¯è¡¨æ ¼ä¼˜åŒ– */
        @media (max-width: 768px) {
            .table-container {
                overflow-x: scroll;
                -webkit-overflow-scrolling: touch; /* iOS å¹³æ»‘æ»šåŠ¨ */
            }
            
            .stock-table {
                min-width: 700px; /* å‡å°æœ€å°å®½åº¦ï¼Œé€‚åº”æ›´å¤šå†…å®¹ */
            }
            
            /* è°ƒæ•´è¡¨æ ¼åˆ—å®½ï¼Œä¼˜å…ˆæ˜¾ç¤ºé‡è¦ä¿¡æ¯ */
            .stock-table th:nth-child(1), /* è‚¡ç¥¨ä»£ç  */
            .stock-table td:nth-child(1) {
                width: 80px;
                min-width: 80px;
            }
            
            .stock-table th:nth-child(2), /* è‚¡ç¥¨åç§° */
            .stock-table td:nth-child(2) {
                width: 100px;
                min-width: 100px;
            }
            
            .stock-table th:nth-child(3), /* å½“å‰ä»·æ ¼ */
            .stock-table td:nth-child(3) {
                width: 80px;
                min-width: 80px;
            }
            
            .stock-table th:nth-child(4), /* æ¶¨è·Œå¹… */
            .stock-table td:nth-child(4) {
                width: 80px;
                min-width: 80px;
            }
            
            .stock-table th:nth-child(5), /* æˆäº¤é‡ */
            .stock-table td:nth-child(5) {
                width: 90px;
                min-width: 90px;
            }
            
            .stock-table th:nth-child(6), /* æˆäº¤é¢ */
            .stock-table td:nth-child(6) {
                width: 100px;
                min-width: 100px;
            }
            
            .stock-table th:nth-child(7), /* ç»†åˆ†è¡Œä¸š */
            .stock-table td:nth-child(7) {
                width: 120px;
                min-width: 120px;
            }
            
            .stock-table th:nth-child(8), /* æ¦‚å¿µæ ‡ç­¾ */
            .stock-table td:nth-child(8) {
                width: 150px;
                min-width: 150px;
            }
            
            /* æ·»åŠ æ»šåŠ¨æç¤º */
            .table-container::after {
                content: 'â†’';
                position: absolute;
                right: 10px;
                top: 50%;
                transform: translateY(-50%);
                background: rgba(52, 152, 219, 0.8);
                color: white;
                width: 30px;
                height: 30px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 16px;
                box-shadow: 0 2px 5px rgba(0,0,0,0.2);
                z-index: 10;
                animation: pulse 2s infinite;
            }
            
            @keyframes pulse {
                0% { opacity: 0.7; }
                50% { opacity: 1; }
                100% { opacity: 0.7; }
            }
            
            /* è¡¨æ ¼æ»šåŠ¨æ—¶éšè—æç¤º */
            .table-container.scrolled::after {
                display: none;
            }
        }
        
        /* è‚¡ç¥¨åˆ—è¡¨ */
        .stock-table {
            width: 100%;
            border-collapse: collapse;
            table-layout: auto;
            min-width: 800px; /* ç¡®ä¿è¡¨æ ¼æœ‰æœ€å°å®½åº¦ */
            font-size: 15px; /* å¢å¤§å­—ä½“ */
        }
        
        .stock-table th {
            background-color: #f8f9fa;
            padding: 15px 12px; /* å¢åŠ å‚ç›´å†…è¾¹è· */
            text-align: left;
            font-weight: 600;
            color: #2c3e50;
            border-bottom: 2px solid #e9ecef;
            white-space: nowrap;
            position: relative;
        }
        
        .stock-table th.sortable {
            cursor: pointer;
            user-select: none;
            transition: background-color 0.2s;
        }
        
        .stock-table th.sortable:hover {
            background-color: #e9ecef;
        }
        
        .sort-icon {
            font-size: 12px;
            margin-left: 5px;
            opacity: 0.6;
        }
        
        .sort-icon.asc {
            opacity: 1;
        }
        
        .sort-icon.desc {
            opacity: 1;
        }
        
        .sortable.sort-asc .sort-icon,
        .sortable.sort-desc .sort-icon {
            opacity: 1;
        }
        
        .stock-table td {
            padding: 15px 12px; /* å¢åŠ å‚ç›´å†…è¾¹è· */
            border-bottom: 1px solid #e9ecef;
            vertical-align: middle;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            font-size: 14px; /* å¢å¤§å­—ä½“ */
        }
        
        .stock-table td:nth-child(7) {
            padding: 10px 8px;
            white-space: normal;
            line-height: 1.3;
            height: auto;
        }
        
        .stock-table tr:hover {
            background-color: #f8f9fa;
        }
        
        .stock-table th:nth-child(1), 
        .stock-table td:nth-child(1) {
            width: 80px;
        }
        
        .stock-table th:nth-child(2), 
        .stock-table td:nth-child(2) {
            width: 70px;
        }
        
        .stock-code {
            font-weight: 700;
            color: #3498db;
        }
        
        .stock-name {
            font-weight: 600;
            color: #2c3e50;
            cursor: pointer;
            position: relative;
            text-decoration: underline;
            text-decoration-style: dotted;
            text-decoration-color: rgba(52, 152, 219, 0.5);
        }
        
        .stock-name:hover {
            color: #3498db;
            text-decoration-color: #3498db;
        }
        
        .stock-table th:nth-child(3), 
        .stock-table td:nth-child(3) {
            width: 70px;
            text-align: right;
        }
        
        .stock-table th:nth-child(4), 
        .stock-table td:nth-child(4) {
            width: 80px;
            text-align: right;
        }
        
        .stock-table th:nth-child(5), 
        .stock-table td:nth-child(5) {
            width: 80px;
            text-align: right;
        }
        
        .stock-table th:nth-child(6), 
        .stock-table td:nth-child(6) {
            width: 100px;
        }
        
        /* æ¦‚å¿µæ ‡ç­¾åˆ—å®½åº¦ - å¯é€šè¿‡JavaScriptåŠ¨æ€è°ƒæ•´ */
        .stock-table th:nth-child(7), 
        .stock-table td:nth-child(7) {
            width: var(--concept-column-width, 200px);
            max-width: var(--concept-column-width, 200px);
        }
        
        .price-up {
            color: #e74c3c;
            font-weight: 600;
        }
        
        .price-down {
            color: #2ecc71;
            font-weight: 600;
        }
        
        .tag {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 13px;
            font-weight: 600;
            margin-right: 6px;
            margin-bottom: 6px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 90px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.08);
            transition: all 0.2s ease;
            border: 1px solid rgba(255,255,255,0.8);
            letter-spacing: 0.3px;
        }
        
        .tag:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.12);
        }
        
        .tag-ai {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: #fff;
            border-color: #3498db;
        }
        
        .tag-tech {
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            color: #fff;
            border-color: #9b59b6;
        }
        
        .tag-energy {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            color: #fff;
            border-color: #2ecc71;
        }
        
        .tag-finance {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: #fff;
            border-color: #f39c12;
        }
        
        .tag-military {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: #fff;
            border-color: #e74c3c;
        }
        
        .tag-medical {
            background: linear-gradient(135deg, #1abc9c, #16a085);
            color: #fff;
            border-color: #1abc9c;
        }
        
        .tag-auto {
            background: linear-gradient(135deg, #34495e, #2c3e50);
            color: #fff;
            border-color: #34495e;
        }
        
        .tag-soe {
            background: linear-gradient(135deg, #e91e63, #c2185b);
            color: #fff;
            border-color: #e91e63;
        }
        
        .tag-default {
            background: linear-gradient(135deg, #bdc3c7, #95a5a6);
            color: #fff;
            border-color: #bdc3c7;
        }
        
        /* åŸºäºé¢‘æ¬¡çš„æ ‡ç­¾é¢œè‰² - ç°ä»£æ¸å˜é£æ ¼ */
        .tag-freq-1 {
            background: linear-gradient(135deg, #ff6b6b, #ee5a6f);
            color: #fff;
            border-color: #ff6b6b;
        }
        
        .tag-freq-2 {
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
            color: #fff;
            border-color: #4ecdc4;
        }
        
        .tag-freq-3 {
            background: linear-gradient(135deg, #45b7d1, #2196f3);
            color: #fff;
            border-color: #45b7d1;
        }
        
        .tag-freq-4 {
            background: linear-gradient(135deg, #f9ca24, #f0932b);
            color: #fff;
            border-color: #f9ca24;
        }
        
        .tag-freq-5 {
            background: linear-gradient(135deg, #a55eea, #8854d0);
            color: #fff;
            border-color: #a55eea;
        }
        
        .tag-freq-6 {
            background: linear-gradient(135deg, #26de81, #20bf6b);
            color: #fff;
            border-color: #26de81;
        }
        
        .tag-freq-7 {
            background: linear-gradient(135deg, #4834d4, #686de0);
            color: #fff;
            border-color: #4834d4;
        }
        
        .tag-freq-8 {
            background: linear-gradient(135deg, #fd79a8, #e84393);
            color: #fff;
            border-color: #fd79a8;
        }
        
        .tag-freq-9 {
            background: linear-gradient(135deg, #a29bfe, #6c5ce7);
            color: #fff;
            border-color: #a29bfe;
        }
        
        .tag-freq-10 {
            background: linear-gradient(135deg, #00b894, #00cec9);
            color: #fff;
            border-color: #00b894;
        }
        
        /* è¯¦æƒ…é¢æ¿ - æ”¹ä¸ºæ‚¬æµ®æç¤ºæ¡†ï¼Œä¼˜åŒ–é«˜åº¦é™åˆ¶ */
        .detail-panel {
            display: none;
            position: absolute;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            padding: 18px;
            z-index: 1000;
            max-width: 500px;
            max-height: 85vh; /* è¿›ä¸€æ­¥å¢åŠ æœ€å¤§é«˜åº¦ä¸ºè§†çª—é«˜åº¦çš„85% */
            overflow-y: auto; /* å†…å®¹è¶…å‡ºæ—¶æ˜¾ç¤ºæ»šåŠ¨æ¡ */
            animation: fadeIn 0.3s;
            border: 1px solid rgba(0,0,0,0.08);
            word-wrap: break-word; /* é˜²æ­¢é•¿å•è¯æº¢å‡º */
            word-break: break-word; /* å…è®¸åœ¨å•è¯å†…æ¢è¡Œ */
        }
        
        /* å¯ç‚¹å‡»çš„æ¶¨è·ŒåœåŸå› åŒºåŸŸæ ·å¼ */
        .clickable-reason {
            cursor: pointer;
            position: relative;
            transition: background-color 0.2s;
        }
        
        .clickable-reason:hover {
            background-color: #f8f9fa;
        }
        
        .click-hint {
            font-size: 12px;
            color: #6c757d;
            margin-top: 5px;
            font-style: italic;
        }
        
        /* æ¶¨è·Œåœæ·±åº¦åˆ†æåŒºåŸŸæ ·å¼ */
        .stock-logic-section {
            margin-top: 20px;
            border-top: 1px solid #e9ecef;
            padding-top: 15px;
        }
        
        .stock-logic-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            font-size: 18px;
            color: #2c3e50;
        }
        
        .close-logic-btn {
            background-color: #6c757d;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 5px 10px;
            font-size: 12px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .close-logic-btn:hover {
            background-color: #5a6268;
        }
        
        .stock-logic-content {
            background-color: #f8f9fa;
            border-radius: 6px;
            padding: 15px;
            font-size: 14px;
            line-height: 1.6;
        }
        
        /* Markdownæ¸²æŸ“æ ·å¼ */
        .stock-logic-content h1, .stock-logic-content h2, .stock-logic-content h3 {
            margin-top: 15px;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .stock-logic-content h1 {
            font-size: 20px;
            border-bottom: 1px solid #e9ecef;
            padding-bottom: 5px;
        }
        
        .stock-logic-content h2 {
            font-size: 18px;
        }
        
        .stock-logic-content h3 {
            font-size: 16px;
        }
        
        .stock-logic-content p {
            margin-bottom: 10px;
        }
        
        .stock-logic-content ul, .stock-logic-content ol {
            margin-left: 20px;
            margin-bottom: 10px;
        }
        
        .stock-logic-content li {
            margin-bottom: 5px;
        }
        
        .stock-logic-content strong {
            color: #2c3e50;
            font-weight: 600;
        }
        
        .stock-logic-content em {
            font-style: italic;
            color: #6c757d;
        }
        
        /* æ ¼å¼åŒ–stockLogicå†…å®¹æ ·å¼ */
        .stock-logic-formatted {
            margin-bottom: 10px;
        }
        
        .section-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .keywords-section {
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px dashed #e0e0e0;
        }
        
        .keywords-container {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 5px;
        }
        
        .keyword-item {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            box-shadow: 0 2px 5px rgba(102, 126, 234, 0.3);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .keyword-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(102, 126, 234, 0.4);
        }
        
        .keyword-plus {
            color: #ffcc00;
            font-size: 16px;
            margin: 0 3px;
            animation: sparkle 1.5s infinite alternate;
        }
        
        .keyword-connector {
            color: #ff6b6b;
            font-size: 14px;
            margin: 0 5px;
            position: relative;
            top: 5px; /* å‘ä¸‹ç§»åŠ¨1px - å¯é€‰å€¼: 1px, 2px, 3px, 4px */
            animation: pulse 2s infinite;
        }
        
        @keyframes sparkle {
            0% { opacity: 0.7; transform: scale(0.9); }
            100% { opacity: 1; transform: scale(1.1); }
        }
        
        @keyframes pulse {
            0% { opacity: 0.8; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.1); }
            100% { opacity: 0.8; transform: scale(1); }
        }
        
        .details-section {
            margin-top: 15px;
        }
        
        .details-container {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 12px;
            border-left: 4px solid #667eea;
        }
        
        .detail-point {
            margin-bottom: 12px;
            padding-left: 5px;
        }
        
        .point-number {
            font-weight: bold;
            color: #667eea;
            font-size: 15px;
        }
        
        /* ç§»åŠ¨ç«¯è¯¦æƒ…é¢æ¿ä¼˜åŒ– */
        @media (max-width: 768px) {
            .detail-panel {
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 90%;
                max-width: none;
                max-height: 80vh;
                border-radius: 8px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            }
            
            .detail-panel::before {
                content: '';
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.5);
                z-index: -1;
            }
            
            .detail-header {
                padding-bottom: 10px;
                border-bottom: 1px solid #eee;
                margin-bottom: 15px;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }
            
            .detail-close {
                display: block;
                width: 24px;
                height: 24px;
                background: #f5f5f5;
                border-radius: 50%;
                text-align: center;
                line-height: 24px;
                font-size: 16px;
                cursor: pointer;
                transition: background 0.2s;
            }
            
            .detail-close:hover {
                background: #e0e0e0;
            }
            
            /* ç§»åŠ¨ç«¯å­—ä½“å¤§å°å’Œè§¦æ‘¸ç›®æ ‡ä¼˜åŒ– */
            body {
                font-size: 16px;
                line-height: 1.5;
            }
            
            /* æ ‡é¢˜å­—ä½“å¤§å° */
            h1 {
                font-size: 24px;
            }
            
            h2 {
                font-size: 20px;
            }
            
            h3 {
                font-size: 18px;
            }
            
            /* å¯¼èˆªæ å­—ä½“å’Œè§¦æ‘¸ç›®æ ‡ */
            .nav-links a {
                font-size: 16px;
                padding: 12px 16px;
                min-height: 44px;
                display: flex;
                align-items: center;
            }
            
            .menu-toggle {
                font-size: 20px;
                width: 44px;
                height: 44px;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            /* æœç´¢æ¡†å­—ä½“å’Œå¤§å° */
            .search-input {
                font-size: 16px;
                padding: 12px 16px;
                min-height: 44px;
            }
            
            /* æŒ‰é’®å­—ä½“å’Œè§¦æ‘¸ç›®æ ‡ */
            .btn {
                font-size: 16px;
                padding: 12px 16px;
                min-height: 44px;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            /* è¡¨æ ¼å­—ä½“å’Œè¡Œé«˜ */
            .table {
                font-size: 14px;
            }
            
            .table th,
            .table td {
                padding: 12px 8px;
                min-height: 44px;
                vertical-align: middle;
            }
            
            /* é“¾æ¥å­—ä½“å’Œè§¦æ‘¸ç›®æ ‡ */
            .filter-link {
                font-size: 16px;
                padding: 10px 12px;
                min-height: 44px;
                display: flex;
                align-items: center;
            }
            
            /* ä¾§è¾¹æ æŠ˜å æŒ‰é’® */
            .sidebar-title {
                font-size: 16px;
                padding: 12px 16px;
                min-height: 44px;
            }
            
            .sidebar-title::after {
                font-size: 18px;
            }
            
            /* è¯¦æƒ…é¢æ¿å­—ä½“å’Œé—´è· */
            .detail-panel {
                font-size: 16px;
                padding: 20px;
            }
            
            .detail-header {
                padding-bottom: 15px;
                margin-bottom: 15px;
            }
            
            .detail-close {
                font-size: 24px;
                width: 40px;
                height: 40px;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .detail-item {
                padding: 10px 0;
            }
            
            .detail-label {
                font-size: 14px;
            }
            
            .detail-value {
                font-size: 16px;
            }
            
            /* åŸå› åˆ†æåŒºåŸŸ */
            .reason-item {
                padding: 12px;
                margin-bottom: 12px;
            }
            
            .reason-item-title {
                font-size: 16px;
                line-height: 1.4;
            }
            
            .reason-desc {
                font-size: 14px;
                line-height: 1.5;
            }
            
            /* æ ‡ç­¾å­—ä½“ */
            .tag {
                font-size: 12px;
                padding: 4px 8px;
                margin: 2px;
            }
            
            /* ç»Ÿè®¡å¡ç‰‡å­—ä½“ */
            .stat-value {
                font-size: 24px;
            }
            
            .stat-label {
                font-size: 14px;
            }
            
            /* é¡µè„šå­—ä½“ */
            .footer {
                font-size: 14px;
                padding: 20px 0;
            }
            
            /* ç§»åŠ¨ç«¯é—´è·è°ƒæ•´ */
            .container {
                padding: 0 15px;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .sidebar {
                padding: 15px;
            }
            
            .stats-grid {
                gap: 15px;
            }
            
            .stat-card {
                padding: 15px;
            }
            
            /* è§¦æ‘¸ç›®æ ‡æœ€å°å°ºå¯¸44px */
            .stock-name,
            .stock-code,
            .stock-price,
            .stock-change,
            .stock-turnover,
            .stock-amount {
                min-height: 44px;
                display: flex;
                align-items: center;
            }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .detail-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .detail-title {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .close-btn {
            background: #e74c3c;
            color: #fff;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            font-size: 12px;
            transition: background-color 0.3s;
        }
        
        .close-btn:hover {
            background: #c0392b;
        }
        
        .detail-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 6px;
            margin-bottom: 15px;
        }
        
        .detail-item {
            background: #f8f9fa;
            padding: 6px 4px;
            border-radius: 6px;
            text-align: center;
        }
        
        .detail-label {
            font-size: 10px;
            color: #7f8c8d;
            margin-bottom: 2px;
        }
        
        .detail-value {
            font-size: 11px;
            font-weight: 600;
            color: #2c3e50;
            word-wrap: break-word;
        }
        
        .reason-section {
            margin-top: 12px;
        }
        
        .reason-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .expand-all-btn {
            font-size: 11px;
            padding: 3px 8px;
            border-radius: 4px;
            background-color: #3498db;
            color: white;
            border: none;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .expand-all-btn:hover {
            background-color: #2980b9;
        }
        
        .reason-item {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 6px;
            margin-bottom: 10px;
            border-left: 3px solid #3498db;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .reason-item:hover {
            transform: translateY(-1px);
            box-shadow: 0 3px 8px rgba(0,0,0,0.1);
        }
        
        .reason-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 6px;
        }
        
        .reason-item-title {
            font-weight: 600;
            color: #2c3e50;
            font-size: 13px;
            flex: 1;
            margin-right: 8px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .reason-item-badges {
            display: flex;
            align-items: center;
            gap: 4px;
            flex-shrink: 0;
        }
        
        .importance-badge, .count-badge {
            display: inline-flex;
            align-items: center;
            font-size: 11px;
            padding: 2px 6px;
            border-radius: 10px;
            background-color: #e8f4f8;
            color: #3498db;
            font-weight: 500;
        }
        
        .reason-time {
            font-size: 9px;
            color: #7f8c8d;
            margin-bottom: 6px;
            font-style: italic;
        }
        
        .reason-core-entity {
            font-size: 10px;
            color: #e67e22;
            margin-bottom: 4px;
            font-weight: 500;
            padding: 2px 6px;
            background-color: rgba(230, 126, 34, 0.1);
            border-radius: 4px;
            display: inline-block;
        }
        
        .reason-key-info-chain {
            font-size: 10px;
            color: #8e44ad;
            margin-bottom: 6px;
            font-weight: 500;
            padding: 2px 6px;
            background-color: rgba(142, 68, 173, 0.1);
            border-radius: 4px;
            display: inline-block;
        }
        
        .reason-desc {
            color: #555;
            line-height: 1.4;
            font-size: 12px;
            word-wrap: break-word;
            word-break: break-word;
            position: relative;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            transition: all 0.3s ease;
        }
        
        .reason-desc.expanded {
            -webkit-line-clamp: unset;
            max-height: none;
        }
        
        .reason-desc-toggle {
            font-size: 9px;
            color: #3498db;
            cursor: pointer;
            margin-top: 4px;
            text-align: right;
            font-weight: 500;
        }
        
        .reason-desc-toggle:hover {
            text-decoration: underline;
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 992px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                position: static;
                margin-bottom: 20px;
            }
            
            .nav-menu {
                display: none;
            }
            
            .menu-toggle {
                display: block;
            }
            
            .mobile-nav.active {
                display: block;
            }
            
            .top-bar-container {
                flex-wrap: wrap;
            }
            
            .search-box {
                width: 200px;
            }
        }
        
        @media (max-width: 768px) {
            /* å®¹å™¨è°ƒæ•´ */
            .container {
                padding: 10px;
            }
            
            /* é¡¶éƒ¨å¯¼èˆªæ è°ƒæ•´ */
            .top-bar {
                padding: 10px 0;
            }
            
            .top-bar-container {
                padding: 0 10px;
            }
            
            .logo {
                font-size: 20px;
            }
            
            .search-box {
                width: 100%;
                margin-top: 10px;
            }
            
            /* ç»Ÿè®¡å¡ç‰‡è°ƒæ•´ */
            .stats-grid {
                grid-template-columns: 1fr;
                gap: 15px;
                padding: 15px;
            }
            
            .stat-card {
                padding: 15px;
            }
            
            .stat-value {
                font-size: 24px;
            }
            
            /* è¡¨æ ¼è°ƒæ•´ */
            .stock-table {
                font-size: 13px;
                min-width: 700px;
            }
            
            .stock-table th, .stock-table td {
                padding: 8px 6px;
            }
            
            .tag {
                font-size: 11px;
                padding: 3px 6px;
                margin-right: 4px;
                margin-bottom: 4px;
            }
            
            /* è¯¦æƒ…é¢æ¿è°ƒæ•´ */
            .detail-panel {
                max-width: 90vw;
                max-height: 80vh;
                padding: 15px;
            }
            
            .detail-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 5px;
            }
            
            .detail-item {
                padding: 5px 3px;
                font-size: 12px;
            }
            
            .reason-title {
                font-size: 13px;
            }
            
            .reason-desc {
                font-size: 11px;
            }
        }
        
        @media (max-width: 480px) {
            /* æ›´å°å±å¹•çš„è°ƒæ•´ */
            .container {
                padding: 5px;
            }
            
            .logo {
                font-size: 18px;
            }
            
            .logo-icon {
                font-size: 22px;
                margin-right: 6px;
            }
            
            .search-input {
                padding: 8px 35px 8px 12px;
                font-size: 14px;
            }
            
            .stats-grid {
                padding: 10px;
                gap: 10px;
            }
            
            .stat-card {
                padding: 12px;
            }
            
            .stat-value {
                font-size: 20px;
            }
            
            .stat-label {
                font-size: 13px;
            }
            
            .stock-table {
                font-size: 12px;
                min-width: 600px;
            }
            
            .stock-table th, .stock-table td {
                padding: 6px 4px;
            }
            
            .tag {
                font-size: 10px;
                padding: 2px 5px;
                margin-right: 3px;
                margin-bottom: 3px;
                max-width: 70px;
            }
            
            .detail-panel {
                max-width: 95vw;
                padding: 12px;
            }
            
            .detail-grid {
                grid-template-columns: 1fr;
            }
            
            .detail-title {
                font-size: 16px;
            }
            
            .reason-title {
                font-size: 12px;
            }
            
            .reason-desc {
                font-size: 10px;
            }
            
            .reason-core-entity, .reason-key-info-chain {
                font-size: 9px;
                padding: 1px 4px;
            }
        }
    </style>
</head>
<body>
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <div class="top-bar">
        <div class="top-bar-container">
            <button class="menu-toggle" id="menu-toggle">â˜°</button>
            <a href="#" class="logo">
                <span class="logo-icon">ğŸ“ˆ</span>
                è‚¡ç¥¨æ¶¨è·Œåˆ†æ
            </a>
            
            <ul class="nav-menu">
                <li><a href="#">é¦–é¡µ</a></li>
                <li><a href="#">å¸‚åœºè¡Œæƒ…</a></li>
                <li><a href="#">æ•°æ®åˆ†æ</a></li>
                <li><a href="#">æŠ•èµ„å·¥å…·</a></li>
            </ul>
            
            <div class="search-box">
                <input type="text" class="search-input" placeholder="æœç´¢è‚¡ç¥¨ä»£ç æˆ–åç§°">
                <button class="search-btn">ğŸ”</button>
            </div>
        </div>
        
        <!-- ç§»åŠ¨ç«¯å¯¼èˆªèœå• -->
        <div class="mobile-nav" id="mobile-nav">
            <ul class="mobile-nav-menu">
                <li><a href="#">é¦–é¡µ</a></li>
                <li><a href="#">å¸‚åœºè¡Œæƒ…</a></li>
                <li><a href="#">æ•°æ®åˆ†æ</a></li>
                <li><a href="#">æŠ•èµ„å·¥å…·</a></li>
            </ul>
        </div>
    </div>
    
    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <div class="container">
        <div class="main-content">
            <!-- ä¾§è¾¹æ  -->
            <div class="sidebar">
                <div class="sidebar-section">
                    <h3 class="sidebar-title">
                        <span class="icon">ğŸ“Š</span>
                        æ¶¨è·ŒçŠ¶æ€
                    </h3>
                    <ul class="filter-list">
                        <li class="filter-item">
                            <a href="#" class="filter-link active">å…¨éƒ¨è‚¡ç¥¨</a>
                        </li>
                        <li class="filter-item">
                            <a href="#" class="filter-link">æ¶¨åœè‚¡ç¥¨</a>
                        </li>
                        <li class="filter-item">
                            <a href="#" class="filter-link">è·Œåœè‚¡ç¥¨</a>
                        </li>
                    </ul>
                </div>
                
                <div class="sidebar-section">
                    <h3 class="sidebar-title">
                        <span class="icon">ğŸ¢</span>
                        è¡Œä¸šåˆ†ç±»
                    </h3>
                    <ul class="filter-list" id="industry-list">
                        <!-- è¡Œä¸šåˆ†ç±»å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </ul>
                </div>
                
                <div class="sidebar-section">
                    <h3 class="sidebar-title">
                        <span class="icon">ğŸ·ï¸</span>
                        æ¦‚å¿µæ ‡ç­¾
                    </h3>
                    <ul class="filter-list" id="concept-list">
                        <!-- æ¦‚å¿µæ ‡ç­¾å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </ul>
                </div>
            </div>
            
            <!-- å†…å®¹åŒºåŸŸ -->
            <div class="content">
                <div class="content-header">
                    <h2 class="content-title">ä»Šæ—¥å¸‚åœºæ¦‚è§ˆ</h2>
                </div>
                
                <!-- ç»Ÿè®¡å¡ç‰‡ -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value">89</div>
                        <div class="stat-label">æ€»è‚¡ç¥¨æ•°</div>
                    </div>
                    <div class="stat-card up">
                        <div class="stat-value">66</div>
                        <div class="stat-label">æ¶¨è·Œåœè‚¡ç¥¨</div>
                    </div>
                    <div class="stat-card down">
                        <div class="stat-value">7</div>
                        <div class="stat-label">è·Œåœè‚¡ç¥¨</div>
                    </div>
                </div>
                
                <!-- è‚¡ç¥¨åˆ—è¡¨ -->
                <div class="table-container">
                    <table class="stock-table">
                        <thead>
                            <tr>
                                <th class="sortable" data-column="code">ä»£ç  <span class="sort-icon">â†•</span></th>
                                <th class="sortable" data-column="name">åç§° <span class="sort-icon">â†•</span></th>
                                <th class="sortable" data-column="price">ç°ä»· <span class="sort-icon">â†•</span></th>
                                <th class="sortable" data-column="change">æ¶¨è·Œå¹… <span class="sort-icon">â†•</span></th>
                                <th class="sortable" data-column="amount">æ€»é‡‘é¢ <span class="sort-icon">â†•</span></th>
                                <th class="sortable" data-column="industry">è¡Œä¸š <span class="sort-icon">â†•</span></th>
                                <th>æ¦‚å¿µæ ‡ç­¾</th>
                            </tr>
                        </thead>
                        <tbody id="stock-list">
                            <!-- è‚¡ç¥¨æ•°æ®å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- è¯¦æƒ…é¢æ¿ - æ”¹ä¸ºæ‚¬æµ®æç¤ºæ¡† -->
        <div class="detail-panel" id="detail-panel">
            <div class="detail-header">
                <h3 class="detail-title" id="detail-title">è‚¡ç¥¨è¯¦æƒ…</h3>
            </div>
            
            <div class="detail-grid" id="detail-basic">
                <!-- åŸºæœ¬ä¿¡æ¯å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
            </div>
            
            <div class="reason-section">
                <h3 class="reason-title">
                    ğŸ“¢ç¤¾åŒºçƒ­ç‚¹è®¨è®º
                    <button class="expand-all-btn" id="expand-all-btn">å±•å¼€å…¨éƒ¨</button>
                </h3>
                <div id="detail-reasons">
                    <!-- åŸå› åˆ†æå°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
                </div>
            </div>
            
            <div class="stock-logic-section" id="stock-logic-section" style="display: none;">
                <h3 class="stock-logic-title">
                    ğŸ“ˆæ¶¨è·Œåœæ·±åº¦åˆ†æ
                    <button class="close-logic-btn" id="close-logic-btn">å…³é—­</button>
                </h3>
                <div class="stock-logic-content" id="stock-logic-content">
                    <!-- stockLogicå†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // æ ¼å¼åŒ–stockLogicå†…å®¹
        function formatStockLogic(stockLogic, concept) {
            if (!stockLogic) return '<p>æš‚æ— è¯¦ç»†åˆ†æå†…å®¹</p>';
            
            // æŸ¥æ‰¾ç¬¬ä¸€ä¸ªæ•°å­—ç¼–å·çš„ä½ç½®ï¼ˆå¦‚"1ã€"ï¼‰
            const firstNumberIndex = stockLogic.search(/\d+ã€/);
            
            // å¤„ç†æ¦‚å¿µéƒ¨åˆ†
            let formattedConcepts = '';
            if (concept && concept.trim()) {
                // åˆ†å‰²æ¦‚å¿µå¹¶æ·»åŠ å›¾æ ‡
                const concepts = concept.split(',').map(c => c.trim()).filter(c => c);
                
                // å›¾æ ‡æ•°ç»„ - 20ä¸ªä¸åŒçš„å›¾æ ‡
                const icons = [
                    'âœ¨', 'ğŸŒŸ', 'ğŸ’«', 'â­', 'ğŸŒ ', 
                    'ğŸ”¥', 'ğŸ’', 'ğŸ¯', 'ğŸš€', 'ğŸŒˆ',
                    'ğŸ’¡', 'ğŸ¨', 'ğŸ”®', 'ğŸª', 'ğŸ­',
                    'ğŸŒº', 'ğŸ¦„', 'ğŸŒ¸', 'ğŸ€', 'ğŸŒ»'
                ];
                
                // éšæœºé€‰æ‹©å›¾æ ‡çš„å‡½æ•°
                function getRandomIcon() {
                    return icons[Math.floor(Math.random() * icons.length)];
                }
                
                // ä¸ºæ¯ä¸ªæ¦‚å¿µæ·»åŠ å›¾æ ‡
                for (let i = 0; i < concepts.length; i++) {
                    const conceptItem = concepts[i];
                    const icon = getRandomIcon();
                    
                    formattedConcepts += `<span class="keyword-item">${icon} ${conceptItem}</span>`;
                    
                    // å¦‚æœä¸æ˜¯æœ€åä¸€ä¸ªæ¦‚å¿µï¼Œæ·»åŠ è¿æ¥ç¬¦å·
                    if (i < concepts.length - 1) {
                        formattedConcepts += ` <span class="keyword-connector">â•</span> `;
                    }
                }
            }
            
            if (firstNumberIndex === -1) {
                // å¦‚æœæ²¡æœ‰æ‰¾åˆ°æ•°å­—ç¼–å·ï¼Œç›´æ¥è¿”å›åŸå†…å®¹ï¼Œä½†å¤„ç†æ¢è¡Œ
                let content = stockLogic.replace(/\n/g, '<br>');
                
                // å¦‚æœæœ‰æ¦‚å¿µï¼Œæ·»åŠ æ¦‚å¿µéƒ¨åˆ†
                if (formattedConcepts) {
                    content = `
                        <div class="stock-logic-formatted">
                            <div class="keywords-section">
                                <h3 class="section-title">ğŸ”‘ å…³é”®æ¦‚å¿µ</h3>
                                <div class="keywords-container">${formattedConcepts}</div>
                            </div>
                            <div class="details-section">
                                <h3 class="section-title">ğŸ“‹ è¯¦ç»†åˆ†æ</h3>
                                <div class="details-container">${content}</div>
                            </div>
                        </div>
                    `;
                }
                
                return content;
            }
            
            // æå–å…³é”®è¯éƒ¨åˆ†ï¼ˆæ•°å­—ç¼–å·ä¹‹å‰çš„å†…å®¹ï¼‰
            const keywordsPart = stockLogic.substring(0, firstNumberIndex).trim();
            
            // æå–è¯¦ç»†å†…å®¹éƒ¨åˆ†ï¼ˆæ•°å­—ç¼–å·ä¹‹åçš„å†…å®¹ï¼‰
            const detailsPart = stockLogic.substring(firstNumberIndex).trim();
            
            // å¦‚æœæ²¡æœ‰ä»conceptå­—æ®µè·å–åˆ°æ¦‚å¿µï¼Œåˆ™ä»keywordsPartæå–
            if (!formattedConcepts && keywordsPart) {
                // å›¾æ ‡æ•°ç»„ - 20ä¸ªä¸åŒçš„å›¾æ ‡
                const icons = [
                    'âœ¨', 'ğŸŒŸ', 'ğŸ’«', 'â­', 'ğŸŒ ', 
                    'ğŸ”¥', 'ğŸ’', 'ğŸ¯', 'ğŸš€', 'ğŸŒˆ',
                    'ğŸ’¡', 'ğŸ¨', 'ğŸ”®', 'ğŸª', 'ğŸ­',
                    'ğŸŒº', 'ğŸ¦„', 'ğŸŒ¸', 'ğŸ€', 'ğŸŒ»'
                ];
                
                // éšæœºé€‰æ‹©å›¾æ ‡çš„å‡½æ•°
                function getRandomIcon() {
                    return icons[Math.floor(Math.random() * icons.length)];
                }
                
                // å¤„ç†å…³é”®è¯éƒ¨åˆ†ï¼šä¸ºæ¯ä¸ªæ¦‚å¿µæ·»åŠ éšæœºå›¾æ ‡ï¼Œå¹¶ç”¨â•è¿æ¥
                // é¦–å…ˆåˆ†å‰²å…³é”®è¯
                const keywords = keywordsPart.split('+').map(k => k.trim()).filter(k => k);
                
                // ä¸ºæ¯ä¸ªæ¦‚å¿µæ·»åŠ å›¾æ ‡
                for (let i = 0; i < keywords.length; i++) {
                    const keyword = keywords[i];
                    const icon = getRandomIcon();
                    
                    formattedConcepts += `<span class="keyword-item">${icon} ${keyword}</span>`;
                    
                    // å¦‚æœä¸æ˜¯æœ€åä¸€ä¸ªå…³é”®è¯ï¼Œæ·»åŠ è¿æ¥ç¬¦å·
                    if (i < keywords.length - 1) {
                        formattedConcepts += ` <span class="keyword-connector">â•</span> `;
                    }
                }
            }
            
            // å¤„ç†è¯¦ç»†å†…å®¹éƒ¨åˆ†ï¼šç¡®ä¿æ¯ä¸ªç¼–å·ç‚¹éƒ½æ¢è¡Œæ˜¾ç¤º
            let formattedDetails = detailsPart
                // ä¸ºæ¯ä¸ªç¼–å·ç‚¹æ·»åŠ æ¢è¡Œå’Œæ ·å¼
                .replace(/(\d+ã€)/g, '<div class="detail-point"><span class="point-number">$1</span>')
                // åœ¨æ¯ä¸ªç‚¹çš„æœ«å°¾æ·»åŠ divç»“æŸæ ‡ç­¾
                .replace(/(?=\d+ã€|$)/g, '</div>')
                // å¤„ç†æ¢è¡Œç¬¦
                .replace(/\n/g, '<br>');
            
            // ç»„åˆæ ¼å¼åŒ–åçš„å†…å®¹
            return `
                <div class="stock-logic-formatted">
                    <div class="keywords-section">
                        <h3 class="section-title">ğŸ”‘ å…³é”®æ¦‚å¿µ</h3>
                        <div class="keywords-container">${formattedConcepts}</div>
                    </div>
                    <div class="details-section">
                        <h3 class="section-title">ğŸ“‹ è¯¦ç»†åˆ†æ</h3>
                        <div class="details-container">${formattedDetails}</div>
                    </div>
                </div>
            `;
        }
        
        // è®¾ç½®æ¦‚å¿µæ ‡ç­¾åˆ—å®½åº¦
        function setConceptColumnWidth(width) {
            document.documentElement.style.setProperty('--concept-column-width', width);
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            loadStockData();
            setupExpandToggle();
            setupFilterLinks();
            setupSearch();
            setupSorting();
            setupTableScrollDetection(); // æ·»åŠ è¡¨æ ¼æ»šåŠ¨æ£€æµ‹
            setupSidebarToggle(); // æ·»åŠ ä¾§è¾¹æ æŠ˜å åŠŸèƒ½
            setupMobileDetailPanel(); // æ·»åŠ ç§»åŠ¨ç«¯è¯¦æƒ…é¢æ¿ä¼˜åŒ–
            
            // ä¸ºè¯¦æƒ…é¢æ¿æ·»åŠ é¼ æ ‡æ‚¬åœäº‹ä»¶
            const detailPanel = document.getElementById('detail-panel');
            detailPanel.addEventListener('mouseenter', function() {
                // é¼ æ ‡è¿›å…¥é¢æ¿æ—¶ï¼Œå–æ¶ˆä»»ä½•éšè—æ“ä½œ
                clearTimeout(detailPanel.hideTimeout);
            });
            
            detailPanel.addEventListener('mouseleave', function() {
                // é¼ æ ‡ç¦»å¼€é¢æ¿æ—¶ï¼Œå»¶è¿Ÿéšè—
                detailPanel.hideTimeout = setTimeout(() => {
                    detailPanel.style.display = 'none';
                }, 300);
            });
        });
        
        // è®¾ç½®å±•å¼€/æ”¶èµ·åŠŸèƒ½
        function setupExpandToggle() {
            // ä¸€é”®å±•å¼€/æ”¶èµ·æ‰€æœ‰æ‘˜è¦æŒ‰é’®
            document.addEventListener('click', function(e) {
                if (e.target && e.target.id === 'expand-all-btn') {
                    const button = e.target;
                    // åªè·å–æœ‰å±•å¼€æŒ‰é’®çš„æ‘˜è¦
                    const visibleToggles = document.querySelectorAll('.reason-desc-toggle:not([style*="display: none"])');
                    const allDescs = Array.from(visibleToggles).map(toggle => 
                        document.getElementById(toggle.getAttribute('data-target'))
                    ).filter(Boolean);
                    
                    if (button.textContent === 'å±•å¼€å…¨éƒ¨') {
                        // å±•å¼€æ‰€æœ‰æ‘˜è¦
                        allDescs.forEach(desc => desc.classList.add('expanded'));
                        visibleToggles.forEach(toggle => toggle.textContent = 'æ”¶èµ·');
                        button.textContent = 'æ”¶èµ·å…¨éƒ¨';
                    } else {
                        // æ”¶èµ·æ‰€æœ‰æ‘˜è¦
                        allDescs.forEach(desc => desc.classList.remove('expanded'));
                        visibleToggles.forEach(toggle => toggle.textContent = 'å±•å¼€');
                        button.textContent = 'å±•å¼€å…¨éƒ¨';
                    }
                }
                
                // å•ä¸ªæ‘˜è¦å±•å¼€/æ”¶èµ·æŒ‰é’®
                if (e.target && e.target.classList.contains('reason-desc-toggle')) {
                    const targetId = e.target.getAttribute('data-target');
                    const targetDesc = document.getElementById(targetId);
                    
                    if (targetDesc) {
                        if (targetDesc.classList.contains('expanded')) {
                            targetDesc.classList.remove('expanded');
                            e.target.textContent = 'å±•å¼€';
                        } else {
                            targetDesc.classList.add('expanded');
                            e.target.textContent = 'æ”¶èµ·';
                        }
                    }
                }
            });
        }
        
        // åŠ è½½è‚¡ç¥¨æ•°æ®
        async function loadStockData() {
            try {
                // æ·»åŠ æ—¶é—´æˆ³å‚æ•°å¼ºåˆ¶åˆ·æ–°ç¼“å­˜
                const timestamp = new Date().getTime();
                const response = await fetch(`./stock_data.json?t=${timestamp}`);
                const data = await response.json();
                
                // æ›´æ–°ç»Ÿè®¡æ•°æ®
                updateStatistics(data.statistics);
                
                // ç”Ÿæˆè¡Œä¸šåˆ†ç±»å’Œæ¦‚å¿µæ ‡ç­¾åˆ—è¡¨
                generateFilterLists(data.stocks);
                
                // æ¸²æŸ“è‚¡ç¥¨åˆ—è¡¨
                renderStockList(data.stocks);
                
                // ä¿å­˜æ•°æ®ä¾›ç­›é€‰ä½¿ç”¨
                window.stockData = data.stocks;
            } catch (error) {
                console.error('åŠ è½½è‚¡ç¥¨æ•°æ®å¤±è´¥:', error);
                // å¦‚æœåŠ è½½å¤±è´¥ï¼Œæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
                document.getElementById('stock-list').innerHTML = '<tr><td colspan="6" style="text-align: center; padding: 20px;">æ•°æ®åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥stock_data.jsonæ–‡ä»¶æ˜¯å¦å­˜åœ¨</td></tr>';
            }
        }
        
        // æ›´æ–°ç»Ÿè®¡æ•°æ®
        function updateStatistics(stats) {
            document.querySelector('.stat-card:nth-child(1) .stat-value').textContent = stats.total_stocks;
            document.querySelector('.stat-card:nth-child(2) .stat-value').textContent = stats.limit_up;
            document.querySelector('.stat-card:nth-child(3) .stat-value').textContent = stats.limit_down;
        }
        
        // ç”Ÿæˆç­›é€‰åˆ—è¡¨
        function generateFilterLists(stockData) {
            // ç»Ÿè®¡ç»†åˆ†è¡Œä¸šå‡ºç°é¢‘ç‡
            const subIndustryCount = {};
            stockData.forEach(stock => {
                if (stock.subIndustry && stock.subIndustry !== '--') {
                    subIndustryCount[stock.subIndustry] = (subIndustryCount[stock.subIndustry] || 0) + 1;
                }
            });
            
            // æŒ‰é¢‘ç‡æ’åºå¹¶ç”Ÿæˆè¡Œä¸šåˆ†ç±»åˆ—è¡¨
            const sortedSubIndustries = Object.entries(subIndustryCount)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 10); // åªæ˜¾ç¤ºå‰10ä¸ª
            
            const industryList = document.getElementById('industry-list');
            industryList.innerHTML = '';
            
            sortedSubIndustries.forEach(([industry, count]) => {
                const li = document.createElement('li');
                li.className = 'filter-item';
                li.innerHTML = `<a href="#" class="filter-link">${industry} (${count})</a>`;
                industryList.appendChild(li);
            });
            
            // ç»Ÿè®¡æ¦‚å¿µæ ‡ç­¾å‡ºç°é¢‘ç‡
            const conceptCount = {};
            stockData.forEach(stock => {
                if (stock.concepts && stock.concepts !== '--') {
                    // ä»ã€æ¦‚å¿µ1;æ¦‚å¿µ2;æ¦‚å¿µ3ã€‘æ ¼å¼ä¸­æå–æ¦‚å¿µ
                    const conceptsStr = stock.concepts.replace('ã€', '').replace('ã€‘', '');
                    const concepts = conceptsStr.split(';').map(c => c.trim());
                    
                    concepts.forEach(concept => {
                        if (concept) {
                            conceptCount[concept] = (conceptCount[concept] || 0) + 1;
                        }
                    });
                }
            });
            
            // æŒ‰é¢‘ç‡æ’åºå¹¶ç”Ÿæˆæ¦‚å¿µæ ‡ç­¾åˆ—è¡¨
            const sortedConcepts = Object.entries(conceptCount)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 10); // åªæ˜¾ç¤ºå‰10ä¸ª
            
            const conceptList = document.getElementById('concept-list');
            conceptList.innerHTML = '';
            
            sortedConcepts.forEach(([concept, count]) => {
                const li = document.createElement('li');
                li.className = 'filter-item';
                li.innerHTML = `<a href="#" class="filter-link">${concept} (${count})</a>`;
                conceptList.appendChild(li);
            });
        }
        
        // æ¸²æŸ“è‚¡ç¥¨åˆ—è¡¨
        function renderStockList(data) {
            const stockList = document.getElementById('stock-list');
            stockList.innerHTML = '';
            
            // é¦–å…ˆç»Ÿè®¡æ‰€æœ‰æ¦‚å¿µçš„å‡ºç°é¢‘æ¬¡
            const conceptCount = {};
            data.forEach(stock => {
                if (stock.concepts && stock.concepts !== '--') {
                    const conceptsStr = stock.concepts.replace('ã€', '').replace('ã€‘', '');
                    const concepts = conceptsStr.split(';').map(c => c.trim());
                    
                    concepts.forEach(concept => {
                        if (concept) {
                            conceptCount[concept] = (conceptCount[concept] || 0) + 1;
                        }
                    });
                }
            });
            
            // æ ¹æ®é¢‘æ¬¡æ’åºï¼Œè·å–å‰10ä¸ªé«˜é¢‘æ¦‚å¿µ
            const topConceptsByFrequency = Object.entries(conceptCount)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 10)
                .map(([concept]) => concept);
            
            data.forEach(stock => {
                const row = document.createElement('tr');
                
                // ç§»é™¤æ•´è¡Œçš„ç‚¹å‡»äº‹ä»¶ï¼Œæ”¹ä¸ºåœ¨è‚¡ç¥¨åç§°å•å…ƒæ ¼ä¸Šæ·»åŠ æ‚¬æµ®äº‹ä»¶
                // row.onclick = () => showStockDetail(stock);
                
                const changeClass = stock.change.startsWith('+') ? 'price-up' : 'price-down';
                
                // å¤„ç†æ¦‚å¿µæ ‡ç­¾ï¼Œä»å­—ç¬¦ä¸²ä¸­æå–æ¦‚å¿µ
                let concepts = [];
                if (stock.concepts && stock.concepts !== '--') {
                    // ä»ã€æ¦‚å¿µ1;æ¦‚å¿µ2;æ¦‚å¿µ3ã€‘æ ¼å¼ä¸­æå–æ¦‚å¿µ
                    const conceptsStr = stock.concepts.replace('ã€', '').replace('ã€‘', '');
                    concepts = conceptsStr.split(';').map(c => c.trim());
                }
                
                // åªå–å‰ä¸‰ä¸ªæ¦‚å¿µæ ‡ç­¾
                const topConcepts = concepts.slice(0, 3);
                
                // ç”Ÿæˆæ¦‚å¿µæ ‡ç­¾ï¼Œé¢œè‰²åŸºäºé¢‘æ¬¡
                const tags = topConcepts.map(concept => {
                    let tagClass = 'tag';
                    
                    // æ ¹æ®æ¦‚å¿µåœ¨é¢‘æ¬¡æ’åºä¸­çš„ä½ç½®è®¾ç½®é¢œè‰²
                    const index = topConceptsByFrequency.indexOf(concept);
                    if (index !== -1) {
                        // å‰10ä¸ªé«˜é¢‘æ¦‚å¿µä½¿ç”¨ä¸åŒé¢œè‰²
                        if (index === 0) tagClass += ' tag-freq-1'; // æœ€é«˜é¢‘
                        else if (index === 1) tagClass += ' tag-freq-2';
                        else if (index === 2) tagClass += ' tag-freq-3';
                        else if (index === 3) tagClass += ' tag-freq-4';
                        else if (index === 4) tagClass += ' tag-freq-5';
                        else if (index === 5) tagClass += ' tag-freq-6';
                        else if (index === 6) tagClass += ' tag-freq-7';
                        else if (index === 7) tagClass += ' tag-freq-8';
                        else if (index === 8) tagClass += ' tag-freq-9';
                        else tagClass += ' tag-freq-10';
                    } else {
                        tagClass += ' tag-default'; // é»˜è®¤é¢œè‰²
                    }
                    
                    return `<span class="${tagClass}">${concept}</span>`;
                }).join('');
                
                row.innerHTML = `
                    <td class="stock-code">${stock.code}</td>
                    <td class="stock-name" data-stock='${JSON.stringify(stock).replace(/'/g, "&apos;")}'>${stock.name}</td>
                    <td>${stock.price}</td>
                    <td class="${changeClass}">${stock.change}</td>
                    <td>${stock.amount}</td>
                    <td>${stock.industry}</td>
                    <td>${tags}</td>
                `;
                
                stockList.appendChild(row);
            });
            
            // ä¸ºæ‰€æœ‰è‚¡ç¥¨åç§°æ·»åŠ æ‚¬æµ®äº‹ä»¶
            document.querySelectorAll('.stock-name').forEach(element => {
                element.addEventListener('mouseenter', function(e) {
                    // æ¸…é™¤ä»»ä½•ç°æœ‰çš„éšè—å®šæ—¶å™¨
                    const detailPanel = document.getElementById('detail-panel');
                    clearTimeout(detailPanel.hideTimeout);
                    
                    // éšè—ä¹‹å‰æ˜¾ç¤ºçš„æ¶¨è·ŒåœåŸå› æ·±åº¦åˆ†æå†…å®¹
                    const stockLogicSection = document.getElementById('stock-logic-section');
                    if (stockLogicSection) {
                        stockLogicSection.style.display = 'none';
                        console.log('å·²éšè—ä¹‹å‰æ˜¾ç¤ºçš„æ¶¨è·ŒåœåŸå› æ·±åº¦åˆ†æå†…å®¹');
                    }
                    
                    const stockData = JSON.parse(this.getAttribute('data-stock'));
                    showStockDetail(stockData, e);
                });
                
                element.addEventListener('mouseleave', function() {
                    // å»¶è¿Ÿéšè—ï¼Œç»™ç”¨æˆ·æ—¶é—´ç§»åŠ¨åˆ°è¯¦æƒ…é¢æ¿
                    const detailPanel = document.getElementById('detail-panel');
                    detailPanel.hideTimeout = setTimeout(() => {
                        if (!detailPanel.matches(':hover')) {
                            detailPanel.style.display = 'none';
                        }
                    }, 200);
                });
            });
        }
        
        // æ˜¾ç¤ºè‚¡ç¥¨è¯¦æƒ… - æ”¹ä¸ºæ‚¬æµ®æç¤ºæ¡†
        function showStockDetail(stock, event) {
            const detailPanel = document.getElementById('detail-panel');
            const detailTitle = document.getElementById('detail-title');
            const detailBasic = document.getElementById('detail-basic');
            const detailReasons = document.getElementById('detail-reasons');
            
            // è®¾ç½®æ ‡é¢˜
            detailTitle.textContent = `${stock.name} (${stock.code})`;
            
            // è®¾ç½®åŸºæœ¬ä¿¡æ¯ - æŒ‰ç…§æŒ‡å®šé¡ºåºæ’åˆ—
            detailBasic.innerHTML = `
                <div class="detail-item">
                    <div class="detail-label">ç°ä»·</div>
                    <div class="detail-value">${stock.price}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">æ¶¨è·Œå¹…</div>
                    <div class="detail-value ${stock.change.startsWith('+') ? 'price-up' : 'price-down'}">${stock.change}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">æ¢æ‰‹ç‡</div>
                    <div class="detail-value">${(parseFloat(stock.turnover) * 100).toFixed(2)}%</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">æˆäº¤é¢</div>
                    <div class="detail-value">${stock.amount}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">å¸‚å€¼</div>
                    <div class="detail-value">${stock.marketValue}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">è¿ç»­æ¶¨è·Œåœå¤©æ•°</div>
                    <div class="detail-value">${stock.daysLimit}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">è¡Œä¸š</div>
                    <div class="detail-value">${stock.industry}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">ç»†åˆ†è¡Œä¸š</div>
                    <div class="detail-value">${stock.subIndustry}</div>
                </div>
                <div class="detail-item clickable-reason" id="reason-item">
                    <div class="detail-label">æ¶¨è·ŒåœåŸå› </div>
                    <div class="detail-value">${stock.reason}</div>
                    <div class="click-hint">ğŸ”ç‚¹å‡»æŸ¥çœ‹è¯¦ç»†åˆ†æ</div>
                </div>
            `;
            
            // è®¾ç½®åŸå› åˆ†æ - é™åˆ¶æ˜¾ç¤ºæ•°é‡ä½†ç¡®ä¿æ‘˜è¦å®Œå…¨å±•ç¤º
            const reasonsToShow = stock.reasons;
            detailReasons.innerHTML = reasonsToShow.map((reason, index) => {
                // æ ¹æ®é‡è¦åº¦æ˜¾ç¤ºä¸åŒçš„å›¾æ ‡
                let importanceIcon = '';
                if (reason.importance >= 5) importanceIcon = 'ğŸŒ'; // éå¸¸é‡è¦
                else if (reason.importance >= 4) importanceIcon = 'âœ¨'; // é‡è¦
                else if (reason.importance >= 3) importanceIcon = 'ğŸ’¡'; // ä¸€èˆ¬
                else importanceIcon = 'ğŸŒ™'; // è¾ƒä½
                
                // æ ¹æ®æ¬¡æ•°æ˜¾ç¤ºç«è‹—å›¾æ ‡
                let fireIcons = '';
                if (reason.count) {
                    const count = parseInt(reason.count);
                    for (let i = 0; i < Math.min(count, 5); i++) {
                        fireIcons += 'ğŸ”¥';
                    }
                }
                
                // ä¸é™åˆ¶æ‘˜è¦é•¿åº¦ï¼Œç¡®ä¿å®Œå…¨å±•ç¤º
                const summary = reason.summary;
                
                return `
                    <div class="reason-item">
                        <div class="reason-item-header">
                            <div class="reason-item-title">${reason.topic}</div>
                            <div class="reason-item-badges">
                                <span class="importance-badge">${importanceIcon}</span>
                                <span class="count-badge">${fireIcons}</span>
                            </div>
                        </div>
                        ${reason.core_entity ? `<div class="reason-core-entity">æ ¸å¿ƒä¸»ä½“: ${reason.core_entity}</div>` : ''}
                        ${reason.key_info_chain ? `<div class="reason-key-info-chain">å…³é”®é€»è¾‘: ${reason.key_info_chain}</div>` : ''}
                        ${reason.time ? `<div class="reason-time">${reason.time}</div>` : ''}
                        ${reason.summary ? `
                            <div class="reason-desc" id="reason-desc-${index}" data-summary="${summary.replace(/"/g, '&quot;')}">æ‘˜è¦: ${summary}</div>
                            <div class="reason-desc-toggle" data-target="reason-desc-${index}" style="display: none;">å±•å¼€</div>
                        ` : ''}
                    </div>
                `;
            }).join('');
            
            // æ£€æŸ¥æ¯ä¸ªæ‘˜è¦æ˜¯å¦è¶…è¿‡ä¸‰è¡Œï¼Œå¦‚æœè¶…è¿‡åˆ™æ˜¾ç¤ºå±•å¼€æŒ‰é’®
            setTimeout(() => {
                document.querySelectorAll('.reason-desc').forEach(desc => {
                    // æ£€æŸ¥å®é™…é«˜åº¦æ˜¯å¦å¤§äºä¸‰è¡Œçš„é«˜åº¦
                    const lineHeight = parseInt(window.getComputedStyle(desc).lineHeight);
                    const threeLinesHeight = lineHeight * 3;
                    
                    if (desc.scrollHeight > threeLinesHeight) {
                        // è·å–å¯¹åº”çš„å±•å¼€æŒ‰é’®
                        const toggleId = desc.getAttribute('id');
                        const toggle = document.querySelector(`.reason-desc-toggle[data-target="${toggleId}"]`);
                        if (toggle) {
                            toggle.style.display = 'block';
                        }
                    }
                });
            }, 100);
            
            // æ™ºèƒ½å®šä½ç³»ç»Ÿ - ä¼˜åŒ–ä»¥ç¡®ä¿å†…å®¹å®Œå…¨å¯è§
            const mouseX = event.clientX;
            const mouseY = event.clientY;
            const windowWidth = window.innerWidth;
            const windowHeight = window.innerHeight;
            const scrollX = window.pageXOffset;
            const scrollY = window.pageYOffset;
            
            // å…ˆæ˜¾ç¤ºé¢æ¿ä»¥è·å–å…¶å°ºå¯¸
            detailPanel.style.display = 'block';
            detailPanel.style.visibility = 'hidden'; // å…ˆéšè—ä½†ä¿ç•™å¸ƒå±€
            
            const panelWidth = detailPanel.offsetWidth;
            const panelHeight = detailPanel.offsetHeight;
            
            // ç§»åŠ¨ç«¯ç‰¹æ®Šå¤„ç†
            if (window.innerWidth <= 768) {
                // ç§»åŠ¨ç«¯ä½¿ç”¨å›ºå®šå®šä½ï¼Œå±…ä¸­æ˜¾ç¤º
                detailPanel.style.position = 'fixed';
                detailPanel.style.top = '50%';
                detailPanel.style.left = '50%';
                detailPanel.style.transform = 'translate(-50%, -50%)';
                detailPanel.style.width = '90%';
                detailPanel.style.maxWidth = 'none';
                
                // æ·»åŠ å…³é—­æŒ‰é’®
                if (!document.getElementById('detail-close-btn')) {
                    const closeBtn = document.createElement('div');
                    closeBtn.id = 'detail-close-btn';
                    closeBtn.className = 'detail-close';
                    closeBtn.innerHTML = 'Ã—';
                    closeBtn.addEventListener('click', hideDetail);
                    detailTitle.appendChild(closeBtn);
                }
                
                // è®¾ç½®æœ€å¤§é«˜åº¦ä¸ºçª—å£é«˜åº¦çš„80%
                detailPanel.style.maxHeight = (windowHeight * 0.8) + 'px';
                detailPanel.style.overflowY = 'auto';
                
                // æ˜¾ç¤ºé¢æ¿
                detailPanel.style.visibility = 'visible';
            } else {
                // æ¡Œé¢ç«¯ä½¿ç”¨ç»å¯¹å®šä½
                detailPanel.style.position = 'absolute';
                detailPanel.style.transform = 'none';
                detailPanel.style.width = '';
                detailPanel.style.maxWidth = '500px';
                
                // ç§»é™¤å…³é—­æŒ‰é’®
                const closeBtn = document.getElementById('detail-close-btn');
                if (closeBtn) {
                    closeBtn.remove();
                }
                
                // è®¡ç®—æœ€ä½³ä½ç½®ï¼Œä¼˜å…ˆè€ƒè™‘ä¸‹æ–¹æ˜¾ç¤º
                let leftPos, topPos;
                
                // æ°´å¹³ä½ç½®è®¡ç®—
                if (mouseX + panelWidth + 20 <= windowWidth) {
                    // å³ä¾§æœ‰è¶³å¤Ÿç©ºé—´ï¼Œæ˜¾ç¤ºåœ¨é¼ æ ‡å³ä¾§
                    leftPos = mouseX + 15;
                } else if (mouseX - panelWidth - 20 >= 0) {
                    // å·¦ä¾§æœ‰è¶³å¤Ÿç©ºé—´ï¼Œæ˜¾ç¤ºåœ¨é¼ æ ‡å·¦ä¾§
                    leftPos = mouseX - panelWidth - 15;
                } else {
                    // ä¸¤ä¾§ç©ºé—´éƒ½ä¸è¶³ï¼Œå±…ä¸­æ˜¾ç¤º
                    leftPos = (windowWidth - panelWidth) / 2;
                }
                
                // å‚ç›´ä½ç½®è®¡ç®— - ä¼˜å…ˆæ˜¾ç¤ºåœ¨ä¸‹æ–¹
                if (mouseY + panelHeight + 20 <= windowHeight) {
                    // ä¸‹æ–¹æœ‰è¶³å¤Ÿç©ºé—´ï¼Œæ˜¾ç¤ºåœ¨é¼ æ ‡ä¸‹æ–¹
                    topPos = mouseY + 15;
                } else if (mouseY - panelHeight - 20 >= 0) {
                    // ä¸Šæ–¹æœ‰è¶³å¤Ÿç©ºé—´ï¼Œæ˜¾ç¤ºåœ¨é¼ æ ‡ä¸Šæ–¹
                    topPos = mouseY - panelHeight - 15;
                } else {
                    // ä¸Šä¸‹ç©ºé—´éƒ½ä¸è¶³ï¼Œä»é¡¶éƒ¨å¼€å§‹æ˜¾ç¤ºï¼Œç¡®ä¿å†…å®¹å¯è§
                    topPos = 20; // è·ç¦»é¡¶éƒ¨20px
                    // å¦‚æœé¢æ¿é«˜åº¦è¶…è¿‡çª—å£é«˜åº¦ï¼Œè°ƒæ•´é¢æ¿é«˜åº¦
                    if (panelHeight > windowHeight - 40) {
                        detailPanel.style.maxHeight = (windowHeight - 40) + 'px';
                    }
                }
                
                // åº”ç”¨ä½ç½®ï¼Œè€ƒè™‘æ»šåŠ¨åç§»
                detailPanel.style.left = (leftPos + scrollX) + 'px';
                detailPanel.style.top = (topPos + scrollY) + 'px';
                detailPanel.style.visibility = 'visible'; // æ˜¾ç¤ºé¢æ¿
            }
            
            // æ·»åŠ ä¸€ä¸ªå°çš„å»¶è¿Ÿï¼Œç¡®ä¿é¼ æ ‡å¯ä»¥ç§»åŠ¨åˆ°é¢æ¿ä¸Šè€Œä¸ä¼šç«‹å³æ¶ˆå¤±
            detailPanel.dataset.mouseLeaveTime = Date.now();
            
            // æ·»åŠ ç‚¹å‡»äº‹ä»¶å¤„ç†
            setTimeout(() => {
                console.log('å¼€å§‹ç»‘å®šç‚¹å‡»äº‹ä»¶'); // æ·»åŠ è°ƒè¯•æ—¥å¿—
                
                // ä½¿ç”¨ç±»é€‰æ‹©å™¨è€Œä¸æ˜¯IDï¼Œé¿å…IDå†²çª
                const reasonItem = document.querySelector('.clickable-reason');
                const stockLogicSection = document.getElementById('stock-logic-section');
                const stockLogicContent = document.getElementById('stock-logic-content');
                const closeLogicBtn = document.getElementById('close-logic-btn');
                
                console.log('reasonItem:', reasonItem); // æ·»åŠ è°ƒè¯•æ—¥å¿—
                console.log('stockLogicSection:', stockLogicSection); // æ·»åŠ è°ƒè¯•æ—¥å¿—
                console.log('stockLogicContent:', stockLogicContent); // æ·»åŠ è°ƒè¯•æ—¥å¿—
                console.log('closeLogicBtn:', closeLogicBtn); // æ·»åŠ è°ƒè¯•æ—¥å¿—
                
                // ç§»é™¤ä¹‹å‰çš„äº‹ä»¶ç›‘å¬å™¨ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
                if (reasonItem) {
                    // å…‹éš†èŠ‚ç‚¹ä»¥ç§»é™¤æ‰€æœ‰äº‹ä»¶ç›‘å¬å™¨
                    const newReasonItem = reasonItem.cloneNode(true);
                    reasonItem.parentNode.replaceChild(newReasonItem, reasonItem);
                    
                    // ä¸ºæ¶¨è·ŒåœåŸå› åŒºåŸŸæ·»åŠ ç‚¹å‡»äº‹ä»¶
                    newReasonItem.addEventListener('click', function(e) {
                        e.preventDefault(); // é˜»æ­¢é»˜è®¤è¡Œä¸º
                        console.log('ç‚¹å‡»äº†æ¶¨è·ŒåœåŸå› åŒºåŸŸ'); // æ·»åŠ è°ƒè¯•æ—¥å¿—
                        console.log('stock.stockLogic:', stock.stockLogic); // æ·»åŠ è°ƒè¯•æ—¥å¿—
                        
                        // æ˜¾ç¤ºstockLogicåŒºåŸŸ
                        stockLogicSection.style.display = 'block';
                        console.log('å·²æ˜¾ç¤ºstockLogicåŒºåŸŸ'); // æ·»åŠ è°ƒè¯•æ—¥å¿—
                        
                        // æ¸²æŸ“stockLogicå†…å®¹
                        if (stock.stockLogic) {
                            // ä½¿ç”¨è‡ªå®šä¹‰æ ¼å¼åŒ–å‡½æ•°å¤„ç†stockLogicå†…å®¹
                            console.log('åŸå§‹stockLogicå†…å®¹:', stock.stockLogic); // æ·»åŠ è°ƒè¯•æ—¥å¿—
                            console.log('conceptå†…å®¹:', stock.concept); // æ·»åŠ è°ƒè¯•æ—¥å¿—
                            const formattedContent = formatStockLogic(stock.stockLogic, stock.concept);
                            console.log('æ ¼å¼åŒ–åçš„å†…å®¹:', formattedContent); // æ·»åŠ è°ƒè¯•æ—¥å¿—
                            
                            // æ¸…ç©ºå†…å®¹
                            stockLogicContent.innerHTML = '';
                            
                            // åˆ›å»ºä¸€ä¸ªä¸´æ—¶divæ¥è§£æHTML
                            const tempDiv = document.createElement('div');
                            tempDiv.innerHTML = formattedContent;
                            
                            // å°†è§£æåçš„èŠ‚ç‚¹ç§»åŠ¨åˆ°ç›®æ ‡å®¹å™¨
                            while (tempDiv.firstChild) {
                                stockLogicContent.appendChild(tempDiv.firstChild);
                            }
                            
                            console.log('å·²æ¸²æŸ“stockLogicå†…å®¹'); // æ·»åŠ è°ƒè¯•æ—¥å¿—
                        } else {
                            stockLogicContent.innerHTML = '<p>æš‚æ— è¯¦ç»†åˆ†æå†…å®¹</p>';
                            console.log('æ˜¾ç¤ºæš‚æ— å†…å®¹æç¤º'); // æ·»åŠ è°ƒè¯•æ—¥å¿—
                        }
                        
                        // æ»šåŠ¨åˆ°stockLogicåŒºåŸŸ
                        stockLogicSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                        console.log('å·²æ»šåŠ¨åˆ°stockLogicåŒºåŸŸ'); // æ·»åŠ è°ƒè¯•æ—¥å¿—
                    });
                    
                    // æ·»åŠ é¼ æ ‡æ‚¬åœæ•ˆæœï¼Œæç¤ºç”¨æˆ·å¯ä»¥ç‚¹å‡»
                    newReasonItem.style.cursor = 'pointer';
                    newReasonItem.addEventListener('mouseenter', function() {
                        console.log('é¼ æ ‡æ‚¬åœåœ¨æ¶¨è·ŒåœåŸå› åŒºåŸŸ'); // æ·»åŠ è°ƒè¯•æ—¥å¿—
                        newReasonItem.style.backgroundColor = '#f0f8ff';
                    });
                    
                    newReasonItem.addEventListener('mouseleave', function() {
                        newReasonItem.style.backgroundColor = '';
                    });
                } else {
                    console.error('æœªæ‰¾åˆ°æ¶¨è·ŒåœåŸå› åŒºåŸŸå…ƒç´ '); // æ·»åŠ è°ƒè¯•æ—¥å¿—
                }
                
                // ä¸ºå…³é—­æŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶
                if (closeLogicBtn) {
                    // å…‹éš†èŠ‚ç‚¹ä»¥ç§»é™¤æ‰€æœ‰äº‹ä»¶ç›‘å¬å™¨
                    const newCloseBtn = closeLogicBtn.cloneNode(true);
                    closeLogicBtn.parentNode.replaceChild(newCloseBtn, closeLogicBtn);
                    
                    newCloseBtn.addEventListener('click', function() {
                        stockLogicSection.style.display = 'none';
                        console.log('å·²å…³é—­stockLogicåŒºåŸŸ'); // æ·»åŠ è°ƒè¯•æ—¥å¿—
                    });
                } else {
                    console.error('æœªæ‰¾åˆ°å…³é—­æŒ‰é’®å…ƒç´ '); // æ·»åŠ è°ƒè¯•æ—¥å¿—
                }
            }, 100);
        }
        
        // éšè—è¯¦æƒ…é¢æ¿
        function hideDetail() {
            const detailPanel = document.getElementById('detail-panel');
            // æ·»åŠ å»¶è¿Ÿï¼Œé˜²æ­¢ç”¨æˆ·æ„å¤–å°†é¼ æ ‡ç§»å‡º
            setTimeout(() => {
                // æ£€æŸ¥é¼ æ ‡æ˜¯å¦åœ¨é¢æ¿ä¸Š
                if (!detailPanel.matches(':hover')) {
                    detailPanel.style.display = 'none';
                }
            }, 200);
        }
        
        // æ·»åŠ ç§»åŠ¨ç«¯è§¦æ‘¸äº‹ä»¶å¤„ç†
        function setupMobileDetailPanel() {
            const detailPanel = document.getElementById('detail-panel');
            
            // æ·»åŠ èƒŒæ™¯é®ç½©ç‚¹å‡»äº‹ä»¶
            document.addEventListener('click', function(e) {
                if (window.innerWidth <= 768 && 
                    detailPanel.style.display === 'block' && 
                    !detailPanel.contains(e.target) &&
                    !e.target.closest('.stock-name')) {
                    detailPanel.style.display = 'none';
                }
            });
            
            // æ·»åŠ è§¦æ‘¸äº‹ä»¶ï¼Œé˜²æ­¢æ»šåŠ¨æ—¶è¯¯è§¦
            detailPanel.addEventListener('touchstart', function(e) {
                e.stopPropagation();
            });
            
            // æ·»åŠ è§¦æ‘¸æ»‘åŠ¨äº‹ä»¶ï¼Œå…è®¸é¢æ¿å†…æ»šåŠ¨
            let startY = 0;
            detailPanel.addEventListener('touchmove', function(e) {
                const currentY = e.touches[0].clientY;
                const scrollTop = detailPanel.scrollTop;
                const scrollHeight = detailPanel.scrollHeight;
                const height = detailPanel.clientHeight;
                
                // å¦‚æœé¢æ¿å·²ç»æ»šåŠ¨åˆ°åº•éƒ¨æˆ–é¡¶éƒ¨ï¼Œé˜»æ­¢é»˜è®¤è¡Œä¸º
                if ((scrollTop === 0 && currentY > startY) || 
                    (scrollTop + height >= scrollHeight && currentY < startY)) {
                    e.preventDefault();
                }
            }, { passive: false });
            
            detailPanel.addEventListener('touchstart', function(e) {
                startY = e.touches[0].clientY;
            });
        }
        
        // å…³é—­è¯¦æƒ…é¢æ¿ - ä¿ç•™ä»¥é˜²ä¸‡ä¸€
        function closeDetail() {
            hideDetail();
        }
        
        // è®¾ç½®ç­›é€‰é“¾æ¥
        function setupFilterLinks() {
            // ä½¿ç”¨äº‹ä»¶å§”æ‰˜å¤„ç†åŠ¨æ€ç”Ÿæˆçš„ç­›é€‰é“¾æ¥
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('filter-link')) {
                    e.preventDefault();
                    
                    // ç§»é™¤æ‰€æœ‰activeç±»
                    document.querySelectorAll('.filter-link').forEach(l => l.classList.remove('active'));
                    
                    // æ·»åŠ activeç±»åˆ°å½“å‰é“¾æ¥
                    e.target.classList.add('active');
                    
                    // ç­›é€‰æ•°æ®
                    const filterText = e.target.textContent.trim();
                    let filteredData = window.stockData || [];
                    
                    if (filterText === 'æ¶¨åœè‚¡ç¥¨') {
                        filteredData = window.stockData.filter(stock => stock.change.startsWith('+'));
                    } else if (filterText === 'è·Œåœè‚¡ç¥¨') {
                        filteredData = window.stockData.filter(stock => stock.change.startsWith('-'));
                    } else if (filterText !== 'å…¨éƒ¨è‚¡ç¥¨') {
                        // æå–ç­›é€‰æ–‡æœ¬ï¼ˆå»æ‰é¢‘æ¬¡éƒ¨åˆ†ï¼‰
                        const actualFilterText = filterText.replace(/\s*\(\d+\)$/, '');
                        
                        // æŒ‰è¡Œä¸šæˆ–æ¦‚å¿µç­›é€‰
                        filteredData = window.stockData.filter(stock => {
                            // æ£€æŸ¥ç»†åˆ†è¡Œä¸š
                            if (stock.subIndustry && stock.subIndustry === actualFilterText) {
                                return true;
                            }
                            
                            // æ£€æŸ¥æ¦‚å¿µæ ‡ç­¾
                            if (stock.concepts && stock.concepts !== '--') {
                                const conceptsStr = stock.concepts.replace('ã€', '').replace('ã€‘', '');
                                const concepts = conceptsStr.split(';').map(c => c.trim());
                                return concepts.includes(actualFilterText);
                            }
                            
                            return false;
                        });
                    }
                    
                    // é‡æ–°æ¸²æŸ“åˆ—è¡¨
                    renderStockList(filteredData);
                }
            });
        }
        
        // è®¾ç½®æœç´¢åŠŸèƒ½
        function setupSearch() {
            const searchInput = document.querySelector('.search-input');
            
            searchInput.addEventListener('input', function() {
                const searchText = this.value.toLowerCase().trim();
                
                if (searchText === '') {
                    renderStockList(window.stockData || []);
                    return;
                }
                
                const filteredData = window.stockData.filter(stock => 
                    stock.code.toLowerCase().includes(searchText) || 
                    stock.name.toLowerCase().includes(searchText)
                );
                
                renderStockList(filteredData);
            });
        }
        
        // è®¾ç½®è¡¨æ ¼æ»šåŠ¨æ£€æµ‹
        function setupTableScrollDetection() {
            const tableContainers = document.querySelectorAll('.table-container');
            
            tableContainers.forEach(container => {
                container.addEventListener('scroll', function() {
                    if (this.scrollLeft > 10) {
                        this.classList.add('scrolled');
                    } else {
                        this.classList.remove('scrolled');
                    }
                });
            });
        }
        
        // è®¾ç½®ä¾§è¾¹æ æŠ˜å åŠŸèƒ½
        function setupSidebarToggle() {
            const sidebarTitles = document.querySelectorAll('.sidebar-title');
            
            sidebarTitles.forEach(title => {
                title.addEventListener('click', function() {
                    const section = this.parentElement;
                    section.classList.toggle('collapsed');
                });
            });
        }
        
        // è®¾ç½®æ’åºåŠŸèƒ½
        function setupSorting() {
            const sortHeaders = document.querySelectorAll('.sortable');
            
            sortHeaders.forEach(header => {
                header.addEventListener('click', function() {
                    const column = this.getAttribute('data-column');
                    const sortIcon = this.querySelector('.sort-icon');
                    
                    // ç§»é™¤æ‰€æœ‰å…¶ä»–åˆ—çš„æ’åºçŠ¶æ€
                    sortHeaders.forEach(h => {
                        if (h !== this) {
                            h.classList.remove('sort-asc', 'sort-desc');
                            const icon = h.querySelector('.sort-icon');
                            if (icon) icon.textContent = 'â†•';
                        }
                    });
                    
                    // åˆ‡æ¢å½“å‰åˆ—çš„æ’åºçŠ¶æ€
                    if (this.classList.contains('sort-asc')) {
                        this.classList.remove('sort-asc');
                        this.classList.add('sort-desc');
                        sortIcon.textContent = 'â†“';
                        sortData(column, 'desc');
                    } else if (this.classList.contains('sort-desc')) {
                        this.classList.remove('sort-desc');
                        this.classList.add('sort-asc');
                        sortIcon.textContent = 'â†‘';
                        sortData(column, 'asc');
                    } else {
                        this.classList.add('sort-asc');
                        sortIcon.textContent = 'â†‘';
                        sortData(column, 'asc');
                    }
                });
            });
        }
        
        // æ’åºæ•°æ®
        function sortData(column, order) {
            const sortedData = [...window.stockData].sort((a, b) => {
                let valueA = a[column];
                let valueB = b[column];
                
                // å¤„ç†ç‰¹æ®Šåˆ—çš„æ’åº
                if (column === 'price' || column === 'amount') {
                    // ä½¿ç”¨åŸå§‹æ•°å€¼è¿›è¡Œæ’åº
                    valueA = a[column + '_value'] || parseFloat(valueA.toString().replace(/[,äº¿ä¸‡åƒ]/g, ''));
                    valueB = b[column + '_value'] || parseFloat(valueB.toString().replace(/[,äº¿ä¸‡åƒ]/g, ''));
                } else if (column === 'change') {
                    // æ¶¨è·Œå¹…å·²ç»æ˜¯%æ ¼å¼ï¼Œåªéœ€ç§»é™¤%ç¬¦å·è½¬æ¢ä¸ºæ•°å­—
                    valueA = parseFloat(valueA.toString().replace(/[%]/g, ''));
                    valueB = parseFloat(valueB.toString().replace(/[%]/g, ''));
                } else if (column === 'code') {
                    // è‚¡ç¥¨ä»£ç æŒ‰æ•°å­—æ’åº
                    valueA = parseInt(valueA.toString().replace(/\D/g, ''));
                    valueB = parseInt(valueB.toString().replace(/\D/g, ''));
                }
                
                // æ¯”è¾ƒé€»è¾‘
                if (valueA < valueB) return order === 'asc' ? -1 : 1;
                if (valueA > valueB) return order === 'asc' ? 1 : -1;
                return 0;
            });
            
            renderStockList(sortedData);
        }
    </script>
    <script>
        // ç§»åŠ¨ç«¯èœå•åŠŸèƒ½
        document.addEventListener('DOMContentLoaded', function() {
            const menuToggle = document.getElementById('menu-toggle');
            const mobileNav = document.querySelector('.mobile-nav');
            
            if (menuToggle && mobileNav) {
                menuToggle.addEventListener('click', function() {
                    mobileNav.classList.toggle('active');
                    
                    // åˆ‡æ¢èœå•å›¾æ ‡
                    if (mobileNav.classList.contains('active')) {
                        menuToggle.textContent = 'âœ•'; // å…³é—­å›¾æ ‡
                    } else {
                        menuToggle.textContent = 'â˜°'; // æ±‰å ¡èœå•å›¾æ ‡
                    }
                });
                
                // ç‚¹å‡»èœå•é¡¹åå…³é—­èœå•
                const mobileNavLinks = mobileNav.querySelectorAll('a');
                mobileNavLinks.forEach(link => {
                    link.addEventListener('click', function() {
                        mobileNav.classList.remove('active');
                        menuToggle.textContent = 'â˜°';
                    });
                });
                
                // ç‚¹å‡»èœå•å¤–éƒ¨åŒºåŸŸå…³é—­èœå•
                document.addEventListener('click', function(event) {
                    if (!mobileNav.contains(event.target) && !menuToggle.contains(event.target)) {
                        mobileNav.classList.remove('active');
                        menuToggle.textContent = 'â˜°';
                    }
                });
            }
        });
    </script>
</body>
</html>
